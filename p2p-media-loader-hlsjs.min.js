require=function t(e,n,i){function r(a,o){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!o&&u)return u(a,!0);if(s)return s(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var g=n[a]={exports:{}};e[a][0].call(g.exports,function(t){var n=e[a][1][t];return r(n||t)},g,g.exports,t,e,n,i)}return n[a].exports}for(var s="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(t,e,n){window.p2pml||(window.p2pml={}),window.p2pml.hlsjs=t("p2p-media-loader-hlsjs")},{"p2p-media-loader-hlsjs":"p2p-media-loader-hlsjs"}],2:[function(t,e,n){e.exports.createHlsJsLoaderClass=function(t,e){function n(n){this.impl=new t(e,n),this.stats=this.impl.stats}return e.isSupported()?(n.prototype.load=function(t,e,n){this.context=t,this.impl.load(t,e,n)},n.prototype.abort=function(){this.impl.abort(this.context)},n.prototype.destroy=function(){this.context&&this.impl.abort(this.context)},n.getSegmentManager=function(){return e},n):Hls.DefaultConfig.loader}},{}],3:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){this.stats={},this.segmentManager=t}return t.prototype.load=function(t,e,n){var i=this;t.type?this.segmentManager.loadPlaylist(t.url).then(function(e){return i.successPlaylist(e,t,n)}).catch(function(e){return i.error(e,t,n)}):t.frag?this.segmentManager.loadSegment(t.url,function(e,r){return setTimeout(function(){return i.successSegment(e,r,t,n)},0)},function(e){return setTimeout(function(){return i.error(e,t,n)},0)}):console.warn("Unknown load request",t)},t.prototype.abort=function(t){this.segmentManager.abortSegment(t.url)},t.prototype.successPlaylist=function(t,e,n){var i=performance.now();this.stats.trequest=i-300,this.stats.tfirst=i-200,this.stats.tload=i,this.stats.loaded=t.length,n.onSuccess({url:e.url,data:t},this.stats,e)},t.prototype.successSegment=function(t,e,n,i){var r=performance.now(),s=t.byteLength/(e<=0?12500:e);this.stats.trequest=r-1-s,this.stats.tfirst=r-s,this.stats.tload=r,this.stats.loaded=t.byteLength,i.onSuccess({url:n.url,data:t},this.stats,n)},t.prototype.error=function(t,e,n){n.onError(t,e)},t}();n.default=i},{}],4:[function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,s){function a(t){try{u(i.next(t))}catch(t){s(t)}}function o(t){try{u(i.throw(t))}catch(t){s(t)}}function u(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,o)}u((i=i.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){function n(n){return function(a){return function(n){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,r&&(s=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(r,n[1])).done)return s;switch(r=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return o.label++,{value:n[1],done:!1};case 5:o.label++,r=n[1],n=[0];continue;case 7:n=o.ops.pop(),o.trys.pop();continue;default:if(s=o.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){o=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){o.label=n[1];break}if(6===n[0]&&o.label<s[1]){o.label=s[1],s=n;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(n);break}s[2]&&o.ops.pop(),o.trys.pop();continue}n=e.call(t,o)}catch(t){n=[6,t],r=0}finally{i=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}var i,r,s,a,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a};Object.defineProperty(n,"__esModule",{value:!0});var s=t("p2p-media-loader-core"),a=t("./utils"),o=t("m3u8-parser"),u=function(){function t(t){this.masterPlaylist=null,this.variantPlaylists=new Map,this.segmentRequest=null,this.playQueue=[],this.loader=t,this.loader.on(s.LoaderEvents.SegmentLoaded,this.onSegmentLoaded.bind(this)),this.loader.on(s.LoaderEvents.SegmentError,this.onSegmentError.bind(this)),this.loader.on(s.LoaderEvents.SegmentAbort,this.onSegmentAbort.bind(this))}return t.prototype.isSupported=function(){return this.loader.isSupported()},t.prototype.processPlaylist=function(t,e){var n=this,i=new o.Parser;i.push(e),i.end();var r=new l(t,i.manifest);r.manifest.playlists?(this.masterPlaylist=r,this.variantPlaylists.forEach(function(t){return t.swarmId=n.getSwarmId(t.url)})):(r.swarmId=this.getSwarmId(t),this.variantPlaylists.set(t,r),this.updateSegments())},t.prototype.loadPlaylist=function(t){return i(this,void 0,void 0,function(){var e;return r(this,function(n){switch(n.label){case 0:return[4,a.default.fetchContentAsText(t)];case 1:return e=n.sent(),this.processPlaylist(t,e),[2,e]}})})},t.prototype.loadSegment=function(t,e,n){var i=this.getSegmentLocation(t);if(i){var r=(i.playlist.manifest.mediaSequence?i.playlist.manifest.mediaSequence:0)+i.segmentIndex;if(this.playQueue.length>0){this.playQueue[this.playQueue.length-1].segmentSequence!==r-1&&(this.playQueue=[])}this.segmentRequest&&this.segmentRequest.onError("Cancel segment request: simultaneous segment requests are not supported"),this.segmentRequest=new g(t,r,i.playlist.url,e,n),this.playQueue.push({segmentUrl:t,segmentSequence:r}),this.loadSegments(i.playlist,i.segmentIndex,!0)}else a.default.fetchContentAsArrayBuffer(t).then(function(t){return e(t,0)}).catch(function(t){return n(t)})},t.prototype.setPlayingSegment=function(t){var e=this.playQueue.findIndex(function(e){return e.segmentUrl==t});e>=0&&(this.playQueue=this.playQueue.slice(e),this.updateSegments())},t.prototype.abortSegment=function(t){this.segmentRequest&&this.segmentRequest.segmentUrl===t&&(this.segmentRequest=null)},t.prototype.destroy=function(){this.loader.destroy(),this.segmentRequest&&(this.segmentRequest.onError("Loading aborted: object destroyed"),this.segmentRequest=null),this.masterPlaylist=null,this.variantPlaylists.clear(),this.playQueue=[]},t.prototype.updateSegments=function(){if(this.segmentRequest){var t=this.getSegmentLocation(this.segmentRequest.segmentUrl);if(t)this.loadSegments(t.playlist,t.segmentIndex,!1);else{var e=this.variantPlaylists.get(this.segmentRequest.playlistUrl);e&&this.loadSegments(e,0,!1,{url:this.segmentRequest.segmentUrl,sequence:this.segmentRequest.segmentSequence})}}},t.prototype.onSegmentLoaded=function(t){this.segmentRequest&&this.segmentRequest.segmentUrl===t.url&&(this.segmentRequest.onSuccess(t.data.slice(0),t.downloadSpeed),this.segmentRequest=null)},t.prototype.onSegmentError=function(t,e){this.segmentRequest&&this.segmentRequest.segmentUrl===t&&(this.segmentRequest.onError(e),this.segmentRequest=null)},t.prototype.onSegmentAbort=function(t){this.segmentRequest&&this.segmentRequest.segmentUrl===t&&(this.segmentRequest.onError("Loading aborted: internal abort"),this.segmentRequest=null)},t.prototype.getSegmentLocation=function(t){for(var e=this.variantPlaylists.values(),n=e.next();!n.done;n=e.next()){var i=n.value,r=i.getSegmentIndex(t);if(r>=0)return{playlist:i,segmentIndex:r}}},t.prototype.getSegmentId=function(t,e){return t+"+"+e.swarmId},t.prototype.loadSegments=function(t,e,n,i){var r=[],a=t.manifest.segments,o=t.manifest.mediaSequence?t.manifest.mediaSequence:0,u=null,l=Math.max(0,this.playQueue.length-1);if(i){var g=t.getSegmentAbsoluteUrl(i.url),c=this.getSegmentId(i.sequence,t);r.push(new s.Segment(c,g,l++)),n&&(u=c)}for(var f=e;f<a.length;++f){g=t.getSegmentAbsoluteUrlByIndex(f),c=this.getSegmentId(o+f,t);r.push(new s.Segment(c,g,l++)),n&&!u&&(u=c)}if(this.loader.load(r,t.swarmId),u){var h=this.loader.getSegment(u);h&&this.onSegmentLoaded(h)}},t.prototype.getSwarmId=function(t){if(this.masterPlaylist)for(var e=0;e<this.masterPlaylist.manifest.playlists.length;++e){var n=this.masterPlaylist.manifest.playlists[e].uri;if((n=a.default.isAbsoluteUrl(n)?n:this.masterPlaylist.baseUrl+n)===t)return e+"+"+this.masterPlaylist.url}return t},t}();n.default=u;var l=function(){function t(t,e){this.url=t,this.manifest=e;var n=t.lastIndexOf("/");if(-1===n)throw new Error("Unexpected playlist URL format");this.baseUrl=t.substring(0,n+1)}return t.prototype.getSegmentIndex=function(t){for(var e=0;e<this.manifest.segments.length;++e)if(t===this.getSegmentAbsoluteUrlByIndex(e))return e;return-1},t.prototype.getSegmentAbsoluteUrlByIndex=function(t){return this.getSegmentAbsoluteUrl(this.manifest.segments[t].uri)},t.prototype.getSegmentAbsoluteUrl=function(t){return a.default.isAbsoluteUrl(t)?t:this.baseUrl+t},t}(),g=function(){return function(t,e,n,i,r){this.segmentUrl=t,this.segmentSequence=e,this.playlistUrl=n,this.onSuccess=i,this.onError=r}}()},{"./utils":5,"m3u8-parser":6,"p2p-media-loader-core":void 0}],5:[function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,s){function a(t){try{u(i.next(t))}catch(t){s(t)}}function o(t){try{u(i.throw(t))}catch(t){s(t)}}function u(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,o)}u((i=i.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){function n(n){return function(a){return function(n){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,r&&(s=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(r,n[1])).done)return s;switch(r=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return o.label++,{value:n[1],done:!1};case 5:o.label++,r=n[1],n=[0];continue;case 7:n=o.ops.pop(),o.trys.pop();continue;default:if(s=o.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){o=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){o.label=n[1];break}if(6===n[0]&&o.label<s[1]){o.label=s[1],s=n;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(n);break}s[2]&&o.ops.pop(),o.trys.pop();continue}n=e.call(t,o)}catch(t){n=[6,t],r=0}finally{i=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}var i,r,s,a,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a};Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function t(){}return t.fetchContentAsAny=function(t,e){return i(this,void 0,void 0,function(){return r(this,function(n){return[2,new Promise(function(n,i){var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType=e,r.onreadystatechange=function(){4===r.readyState&&(r.status>=200&&r.status<300?n(r.response):i(r.statusText))},r.send()})]})})},t.fetchContentAsText=function(e){return i(this,void 0,void 0,function(){return r(this,function(n){return[2,t.fetchContentAsAny(e,"text")]})})},t.fetchContentAsArrayBuffer=function(e){return i(this,void 0,void 0,function(){return r(this,function(n){return[2,t.fetchContentAsAny(e,"arraybuffer")]})})},t.isAbsoluteUrl=function(t){return t.startsWith("http://")||t.startsWith("https://")},t}();n.default=s},{}],6:[function(t,e,n){"use strict";var i=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},s=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},o=function(){function t(){i(this,t),this.listeners={}}return t.prototype.on=function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)},t.prototype.off=function(t,e){if(!this.listeners[t])return!1;var n=this.listeners[t].indexOf(e);return this.listeners[t].splice(n,1),n>-1},t.prototype.trigger=function(t){var e=this.listeners[t],n=void 0,i=void 0,r=void 0;if(e)if(2===arguments.length)for(i=e.length,n=0;n<i;++n)e[n].call(this,arguments[1]);else for(r=Array.prototype.slice.call(arguments,1),i=e.length,n=0;n<i;++n)e[n].apply(this,r)},t.prototype.dispose=function(){this.listeners={}},t.prototype.pipe=function(t){this.on("data",function(e){t.push(e)})},t}(),u=function(t){function e(){i(this,e);var n=a(this,t.call(this));return n.buffer="",n}return s(e,t),e.prototype.push=function(t){var e=void 0;for(this.buffer+=t,e=this.buffer.indexOf("\n");e>-1;e=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,e)),this.buffer=this.buffer.substring(e+1)},e}(o),l=function(t){for(var e=t.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),n={},i=e.length,r=void 0;i--;)""!==e[i]&&((r=/([^=]*)=(.*)/.exec(e[i]).slice(1))[0]=r[0].replace(/^\s+|\s+$/g,""),r[1]=r[1].replace(/^\s+|\s+$/g,""),r[1]=r[1].replace(/^['"](.*)['"]$/g,"$1"),n[r[0]]=r[1]);return n},g=function(t){function e(){return i(this,e),a(this,t.call(this))}return s(e,t),e.prototype.push=function(t){var e=void 0,n=void 0;if(0!==(t=t.replace(/^[\u0000\s]+|[\u0000\s]+$/g,"")).length)if("#"===t[0])if(0===t.indexOf("#EXT"))if(t=t.replace("\r",""),e=/^#EXTM3U/.exec(t))this.trigger("data",{type:"tag",tagType:"m3u"});else{if(e=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(t))return n={type:"tag",tagType:"inf"},e[1]&&(n.duration=parseFloat(e[1])),e[2]&&(n.title=e[2]),void this.trigger("data",n);if(e=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(t))return n={type:"tag",tagType:"targetduration"},e[1]&&(n.duration=parseInt(e[1],10)),void this.trigger("data",n);if(e=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(t))return n={type:"tag",tagType:"totalduration"},e[1]&&(n.duration=parseInt(e[1],10)),void this.trigger("data",n);if(e=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(t))return n={type:"tag",tagType:"version"},e[1]&&(n.version=parseInt(e[1],10)),void this.trigger("data",n);if(e=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return n={type:"tag",tagType:"media-sequence"},e[1]&&(n.number=parseInt(e[1],10)),void this.trigger("data",n);if(e=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return n={type:"tag",tagType:"discontinuity-sequence"},e[1]&&(n.number=parseInt(e[1],10)),void this.trigger("data",n);if(e=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(t))return n={type:"tag",tagType:"playlist-type"},e[1]&&(n.playlistType=e[1]),void this.trigger("data",n);if(e=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(t))return n={type:"tag",tagType:"byterange"},e[1]&&(n.length=parseInt(e[1],10)),e[2]&&(n.offset=parseInt(e[2],10)),void this.trigger("data",n);if(e=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(t))return n={type:"tag",tagType:"allow-cache"},e[1]&&(n.allowed=!/NO/.test(e[1])),void this.trigger("data",n);if(e=/^#EXT-X-MAP:?(.*)$/.exec(t)){if(n={type:"tag",tagType:"map"},e[1]){var i=l(e[1]);if(i.URI&&(n.uri=i.URI),i.BYTERANGE){var r=i.BYTERANGE.split("@"),s=r[0],a=r[1];n.byterange={},s&&(n.byterange.length=parseInt(s,10)),a&&(n.byterange.offset=parseInt(a,10))}}this.trigger("data",n)}else if(e=/^#EXT-X-STREAM-INF:?(.*)$/.exec(t)){if(n={type:"tag",tagType:"stream-inf"},e[1]){if(n.attributes=l(e[1]),n.attributes.RESOLUTION){var o=n.attributes.RESOLUTION.split("x"),u={};o[0]&&(u.width=parseInt(o[0],10)),o[1]&&(u.height=parseInt(o[1],10)),n.attributes.RESOLUTION=u}n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes["PROGRAM-ID"]&&(n.attributes["PROGRAM-ID"]=parseInt(n.attributes["PROGRAM-ID"],10))}this.trigger("data",n)}else{if(e=/^#EXT-X-MEDIA:?(.*)$/.exec(t))return n={type:"tag",tagType:"media"},e[1]&&(n.attributes=l(e[1])),void this.trigger("data",n);if(e=/^#EXT-X-ENDLIST/.exec(t))this.trigger("data",{type:"tag",tagType:"endlist"});else if(e=/^#EXT-X-DISCONTINUITY/.exec(t))this.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(e=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(t))return n={type:"tag",tagType:"program-date-time"},e[1]&&(n.dateTimeString=e[1],n.dateTimeObject=new Date(e[1])),void this.trigger("data",n);if(e=/^#EXT-X-KEY:?(.*)$/.exec(t))return n={type:"tag",tagType:"key"},e[1]&&(n.attributes=l(e[1]),n.attributes.IV&&("0x"===n.attributes.IV.substring(0,2).toLowerCase()&&(n.attributes.IV=n.attributes.IV.substring(2)),n.attributes.IV=n.attributes.IV.match(/.{8}/g),n.attributes.IV[0]=parseInt(n.attributes.IV[0],16),n.attributes.IV[1]=parseInt(n.attributes.IV[1],16),n.attributes.IV[2]=parseInt(n.attributes.IV[2],16),n.attributes.IV[3]=parseInt(n.attributes.IV[3],16),n.attributes.IV=new Uint32Array(n.attributes.IV))),void this.trigger("data",n);if(e=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(t))return n={type:"tag",tagType:"cue-out-cont"},e[1]?n.data=e[1]:n.data="",void this.trigger("data",n);if(e=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(t))return n={type:"tag",tagType:"cue-out"},e[1]?n.data=e[1]:n.data="",void this.trigger("data",n);if(e=/^#EXT-X-CUE-IN:?(.*)?$/.exec(t))return n={type:"tag",tagType:"cue-in"},e[1]?n.data=e[1]:n.data="",void this.trigger("data",n);this.trigger("data",{type:"tag",data:t.slice(4)})}}}else this.trigger("data",{type:"comment",text:t.slice(1)});else this.trigger("data",{type:"uri",uri:t})},e}(o),c=function(t){function e(){i(this,e);var n=a(this,t.call(this));n.lineStream=new u,n.parseStream=new g,n.lineStream.pipe(n.parseStream);var s=n,o=[],l={},c=void 0,f=void 0,h={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},d=0;return n.manifest={allowCache:!0,discontinuityStarts:[],segments:[]},n.parseStream.on("data",function(t){var e=void 0,n=void 0;({tag:function(){(({"allow-cache":function(){this.manifest.allowCache=t.allowed,"allowed"in t||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var e={};"length"in t&&(l.byterange=e,e.length=t.length,"offset"in t||(this.trigger("info",{message:"defaulting offset to zero"}),t.offset=0)),"offset"in t&&(l.byterange=e,e.offset=t.offset)},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),t.duration>0&&(l.duration=t.duration),0===t.duration&&(l.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=o},key:function(){t.attributes?"NONE"!==t.attributes.METHOD?t.attributes.URI?(t.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),f={method:t.attributes.METHOD||"AES-128",uri:t.attributes.URI},void 0!==t.attributes.IV&&(f.iv=t.attributes.IV)):this.trigger("warn",{message:"ignoring key declaration without URI"}):f=null:this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(t.number)?this.manifest.mediaSequence=t.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+t.number})},"discontinuity-sequence":function(){isFinite(t.number)?(this.manifest.discontinuitySequence=t.number,d=t.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+t.number})},"playlist-type":function(){/VOD|EVENT/.test(t.playlistType)?this.manifest.playlistType=t.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+t.playlist})},map:function(){c={},t.uri&&(c.uri=t.uri),t.byterange&&(c.byterange=t.byterange)},"stream-inf":function(){this.manifest.playlists=o,this.manifest.mediaGroups=this.manifest.mediaGroups||h,t.attributes?(l.attributes||(l.attributes={}),r(l.attributes,t.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||h,t.attributes&&t.attributes.TYPE&&t.attributes["GROUP-ID"]&&t.attributes.NAME){var i=this.manifest.mediaGroups[t.attributes.TYPE];i[t.attributes["GROUP-ID"]]=i[t.attributes["GROUP-ID"]]||{},e=i[t.attributes["GROUP-ID"]],(n={default:/yes/i.test(t.attributes.DEFAULT)}).default?n.autoselect=!0:n.autoselect=/yes/i.test(t.attributes.AUTOSELECT),t.attributes.LANGUAGE&&(n.language=t.attributes.LANGUAGE),t.attributes.URI&&(n.uri=t.attributes.URI),t.attributes["INSTREAM-ID"]&&(n.instreamId=t.attributes["INSTREAM-ID"]),t.attributes.CHARACTERISTICS&&(n.characteristics=t.attributes.CHARACTERISTICS),t.attributes.FORCED&&(n.forced=/yes/i.test(t.attributes.FORCED)),e[t.attributes.NAME]=n}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){d+=1,l.discontinuity=!0,this.manifest.discontinuityStarts.push(o.length)},"program-date-time":function(){this.manifest.dateTimeString=t.dateTimeString,this.manifest.dateTimeObject=t.dateTimeObject},targetduration:function(){!isFinite(t.duration)||t.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+t.duration}):this.manifest.targetDuration=t.duration},totalduration:function(){!isFinite(t.duration)||t.duration<0?this.trigger("warn",{message:"ignoring invalid total duration: "+t.duration}):this.manifest.totalDuration=t.duration},"cue-out":function(){l.cueOut=t.data},"cue-out-cont":function(){l.cueOutCont=t.data},"cue-in":function(){l.cueIn=t.data}})[t.tagType]||function(){}).call(s)},uri:function(){l.uri=t.uri,o.push(l),!this.manifest.targetDuration||"duration"in l||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),l.duration=this.manifest.targetDuration),f&&(l.key=f),l.timeline=d,c&&(l.map=c),l={}},comment:function(){}})[t.type].call(s)}),n}return s(e,t),e.prototype.push=function(t){this.lineStream.push(t)},e.prototype.end=function(){this.lineStream.push("\n")},e}(o);n.LineStream=u,n.ParseStream=g,n.Parser=c},{}],"p2p-media-loader-hlsjs":[function(t,e,n){"use strict";function i(t,e){t.on("hlsFragChanged",function(t,n){var i=n&&n.frag?n.frag.url:void 0;e.setPlayingSegment(i)}),t.on("hlsDestroying",function(){e.destroy()})}function r(t){t&&t.config&&t.config.loader&&"function"==typeof t.config.loader.getSegmentManager&&i(t,t.config.loader.getSegmentManager())}Object.defineProperty(n,"__esModule",{value:!0});var s=t("p2p-media-loader-core"),a=t("./segment-manager"),o=t("./hlsjs-loader"),u=t("./hlsjs-loader-class");n.createLoaderClass=function(t){void 0===t&&(t={});var e=t.segmentManager||new a.default(new s.HybridLoader(t.loaderSettings));return u.createHlsJsLoaderClass(o.default,e)},n.initHlsJsPlayer=r,n.initClapprPlayer=function(t){t.on("play",function(){var e=t.core.getCurrentPlayback();e._hls&&!e._hls._p2pm_linitialized&&(e._hls._p2pm_linitialized=!0,r(t.core.getCurrentPlayback()._hls))})},n.initFlowplayerHlsJsPlayer=function(t){t.on("ready",function(){return r(t.engine.hlsjs)})},n.initVideoJsContribHlsJsPlayer=function(t){t.ready(function(){var e=t.tech_.options_;e&&e.hlsjsConfig&&e.hlsjsConfig.loader&&"function"==typeof e.hlsjsConfig.loader.getSegmentManager&&i(t.tech_,e.hlsjsConfig.loader.getSegmentManager())})},n.initMediaElementJsPlayer=function(t){t.addEventListener("hlsFragChanged",function(e){var n=e.data&&e.data.length>1&&e.data[1].frag?e.data[1].frag.url:void 0,i=t.hlsPlayer;i&&i.config&&i.config.loader&&"function"==typeof i.config.loader.getSegmentManager&&i.config.loader.getSegmentManager().setPlayingSegment(n)}),t.addEventListener("hlsDestroying",function(){var e=t.hlsPlayer;e&&e.config&&e.config.loader&&"function"==typeof e.config.loader.getSegmentManager&&e.config.loader.getSegmentManager().destroy()})};var l=t("./segment-manager");n.SegmentManager=l.default},{"./hlsjs-loader":3,"./hlsjs-loader-class":2,"./segment-manager":4,"p2p-media-loader-core":void 0}]},{},[1]);
