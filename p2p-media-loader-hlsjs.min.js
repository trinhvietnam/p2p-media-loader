require=function s(a,o,u){function l(e,t){if(!o[e]){if(!a[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(g)return g(e,!0);var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}var r=o[e]={exports:{}};a[e][0].call(r.exports,function(t){return l(a[e][1][t]||t)},r,r.exports,s,a,o,u)}return o[e].exports}for(var g="function"==typeof require&&require,t=0;t<u.length;t++)l(u[t]);return l}({1:[function(t,e,n){window.p2pml||(window.p2pml={}),window.p2pml.hlsjs=t("p2p-media-loader-hlsjs")},{"p2p-media-loader-hlsjs":"p2p-media-loader-hlsjs"}],2:[function(t,e,n){e.exports.createHlsJsLoaderClass=function(t,e,n){if(!e.isSupported())return Hls.DefaultConfig.loader;function i(){this.impl=new t(e,n),this.stats=this.impl.stats}return i.prototype.load=function(t,e,n){this.context=t,this.impl.load(t,e,n)},i.prototype.abort=function(){this.impl.abort(this.context)},i.prototype.destroy=function(){this.context&&this.impl.abort(this.context)},i.getSegmentManager=function(){return e},i}},{}],3:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){this.stats={},this.segmentManager=t}return t.prototype.load=function(n,t,i){var r=this;n.type?this.segmentManager.loadPlaylist(n.url).then(function(t){return r.successPlaylist(t,n,i)}).catch(function(t){return r.error(t,n,i)}):n.frag?this.segmentManager.loadSegment(n.url,function(t,e){return setTimeout(function(){return r.successSegment(t,e,n,i)},0)},function(t){return setTimeout(function(){return r.error(t,n,i)},0)}):console.warn("Unknown load request",n)},t.prototype.abort=function(t){this.segmentManager.abortSegment(t.url)},t.prototype.successPlaylist=function(t,e,n){var i=performance.now();this.stats.trequest=i-300,this.stats.tfirst=i-200,this.stats.tload=i,this.stats.loaded=t.length,n.onSuccess({url:e.url,data:t},this.stats,e)},t.prototype.successSegment=function(t,e,n,i){var r=performance.now(),s=t.byteLength/(e<=0?12500:e);this.stats.trequest=r-1-s,this.stats.tfirst=r-s,this.stats.tload=r,this.stats.loaded=t.byteLength,i.onSuccess({url:n.url,data:t},this.stats,n)},t.prototype.error=function(t,e,n){n.onError(t,e)},t}();n.default=i},{}],4:[function(t,e,n){"use strict";var i=this&&this.__awaiter||function(s,a,o,u){return new(o||(o=Promise))(function(t,e){function n(t){try{r(u.next(t))}catch(t){e(t)}}function i(t){try{r(u.throw(t))}catch(t){e(t)}}function r(e){e.done?t(e.value):new o(function(t){t(e.value)}).then(n,i)}r((u=u.apply(s,a||[])).next())})},r=this&&this.__generator||function(n,i){var r,s,a,t,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,s&&(a=2&e[0]?s.return:e[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,e[1])).done)return a;switch(s=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return o.label++,{value:e[1],done:!1};case 5:o.label++,s=e[1],e=[0];continue;case 7:e=o.ops.pop(),o.trys.pop();continue;default:if(!(a=0<(a=o.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){o=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){o.label=e[1];break}if(6===e[0]&&o.label<a[1]){o.label=a[1],a=e;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(e);break}a[2]&&o.ops.pop(),o.trys.pop();continue}e=i.call(n,o)}catch(t){e=[6,t],s=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(n,"__esModule",{value:!0});var h=t("p2p-media-loader-core"),a=t("./utils"),o=t("m3u8-parser"),s=function(){function t(t){this.masterPlaylist=null,this.variantPlaylists=new Map,this.segmentRequest=null,this.playQueue=[],this.loader=t,this.loader.on(h.LoaderEvents.SegmentLoaded,this.onSegmentLoaded.bind(this)),this.loader.on(h.LoaderEvents.SegmentError,this.onSegmentError.bind(this)),this.loader.on(h.LoaderEvents.SegmentAbort,this.onSegmentAbort.bind(this))}return t.prototype.isSupported=function(){return this.loader.isSupported()},t.prototype.processPlaylist=function(t,e){var n=this,i=new o.Parser;i.push(e),i.end();var r=new u(t,i.manifest);if(r.manifest.playlists)this.masterPlaylist=r,this.variantPlaylists.forEach(function(t){return t.swarmId=n.getSwarmId(t.url)});else{var s=this.getSwarmId(t);s===t&&this.masterPlaylist||(r.swarmId=s,this.variantPlaylists.set(t,r),this.updateSegments())}},t.prototype.loadPlaylist=function(n){return i(this,void 0,void 0,function(){var e;return r(this,function(t){switch(t.label){case 0:return[4,a.default.fetchContentAsText(n)];case 1:return e=t.sent(),this.processPlaylist(n,e),[2,e]}})})},t.prototype.loadSegment=function(t,e,n){var i=this.getSegmentLocation(t);if(i){var r=(i.playlist.manifest.mediaSequence?i.playlist.manifest.mediaSequence:0)+i.segmentIndex;if(0<this.playQueue.length)this.playQueue[this.playQueue.length-1].segmentSequence!==r-1&&(this.playQueue=[]);this.segmentRequest&&this.segmentRequest.onError("Cancel segment request: simultaneous segment requests are not supported"),this.segmentRequest=new l(t,r,i.playlist.url,e,n),this.playQueue.push({segmentUrl:t,segmentSequence:r}),this.loadSegments(i.playlist,i.segmentIndex,!0)}else a.default.fetchContentAsArrayBuffer(t).then(function(t){return e(t,0)}).catch(function(t){return n(t)})},t.prototype.setPlayingSegment=function(e){var t=this.playQueue.findIndex(function(t){return t.segmentUrl==e});0<=t&&(this.playQueue=this.playQueue.slice(t),this.updateSegments())},t.prototype.abortSegment=function(t){this.segmentRequest&&this.segmentRequest.segmentUrl===t&&(this.segmentRequest=null)},t.prototype.destroy=function(){this.loader.destroy(),this.segmentRequest&&(this.segmentRequest.onError("Loading aborted: object destroyed"),this.segmentRequest=null),this.masterPlaylist=null,this.variantPlaylists.clear(),this.playQueue=[]},t.prototype.updateSegments=function(){if(this.segmentRequest){var t=this.getSegmentLocation(this.segmentRequest.segmentUrl);if(t)this.loadSegments(t.playlist,t.segmentIndex,!1);else{var e=this.variantPlaylists.get(this.segmentRequest.playlistUrl);e&&this.loadSegments(e,0,!1,{url:this.segmentRequest.segmentUrl,sequence:this.segmentRequest.segmentSequence})}}},t.prototype.onSegmentLoaded=function(t){this.segmentRequest&&this.segmentRequest.segmentUrl===t.url&&(this.segmentRequest.onSuccess(t.data.slice(0),t.downloadSpeed),this.segmentRequest=null)},t.prototype.onSegmentError=function(t,e){this.segmentRequest&&this.segmentRequest.segmentUrl===t.url&&(this.segmentRequest.onError(e),this.segmentRequest=null)},t.prototype.onSegmentAbort=function(t){this.segmentRequest&&this.segmentRequest.segmentUrl===t.url&&(this.segmentRequest.onError("Loading aborted: internal abort"),this.segmentRequest=null)},t.prototype.getSegmentLocation=function(t){for(var e=this.variantPlaylists.values(),n=e.next();!n.done;n=e.next()){var i=n.value,r=i.getSegmentIndex(t);if(0<=r)return{playlist:i,segmentIndex:r}}},t.prototype.loadSegments=function(t,e,n,i){var r=[],s=t.manifest.segments,a=t.manifest.mediaSequence?t.manifest.mediaSequence:0,o=null,u=Math.max(0,this.playQueue.length-1);if(i){var l=t.getSegmentAbsoluteUrl(i.url),g=this.getSegmentId(t,i.sequence);r.push(new h.Segment(g,l,void 0,u++)),n&&(o=g)}for(var f=e;f<s.length;++f){l=t.getSegmentAbsoluteUrlByIndex(f),g=this.getSegmentId(t,a+f);r.push(new h.Segment(g,l,void 0,u++)),n&&!o&&(o=g)}if(this.loader.load(r,t.swarmId),o){var c=this.loader.getSegment(o);c&&this.onSegmentLoaded(c)}},t.prototype.getSegmentId=function(t,e){return t.swarmId+"+"+e},t.prototype.getSwarmId=function(t){if(this.masterPlaylist)for(var e=this.masterPlaylist.url,n=e.indexOf("?"),i=-1===n?e:e.substring(0,n),r=0;r<this.masterPlaylist.manifest.playlists.length;++r){var s=this.masterPlaylist.manifest.playlists[r].uri;if((s=a.default.isAbsoluteUrl(s)?s:this.masterPlaylist.baseUrl+s)===t)return i+"+V"+r}return t},t}();n.default=s;var u=function(){function t(t,e){this.url=t,this.manifest=e,this.swarmId="";var n=t.lastIndexOf("/");if(-1===n)throw new Error("Unexpected playlist URL format");this.baseUrl=t.substring(0,n+1)}return t.prototype.getSegmentIndex=function(t){for(var e=0;e<this.manifest.segments.length;++e)if(t===this.getSegmentAbsoluteUrlByIndex(e))return e;return-1},t.prototype.getSegmentAbsoluteUrlByIndex=function(t){return this.getSegmentAbsoluteUrl(this.manifest.segments[t].uri)},t.prototype.getSegmentAbsoluteUrl=function(t){return a.default.isAbsoluteUrl(t)?t:this.baseUrl+t},t}(),l=function(t,e,n,i,r){this.segmentUrl=t,this.segmentSequence=e,this.playlistUrl=n,this.onSuccess=i,this.onError=r}},{"./utils":5,"m3u8-parser":6,"p2p-media-loader-core":void 0}],5:[function(t,e,n){"use strict";var s=this&&this.__awaiter||function(s,a,o,u){return new(o||(o=Promise))(function(t,e){function n(t){try{r(u.next(t))}catch(t){e(t)}}function i(t){try{r(u.throw(t))}catch(t){e(t)}}function r(e){e.done?t(e.value):new o(function(t){t(e.value)}).then(n,i)}r((u=u.apply(s,a||[])).next())})},a=this&&this.__generator||function(n,i){var r,s,a,t,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,s&&(a=2&e[0]?s.return:e[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,e[1])).done)return a;switch(s=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return o.label++,{value:e[1],done:!1};case 5:o.label++,s=e[1],e=[0];continue;case 7:e=o.ops.pop(),o.trys.pop();continue;default:if(!(a=0<(a=o.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){o=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){o.label=e[1];break}if(6===e[0]&&o.label<a[1]){o.label=a[1],a=e;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(e);break}a[2]&&o.ops.pop(),o.trys.pop();continue}e=i.call(n,o)}catch(t){e=[6,t],s=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function n(){}return n.fetchContentAsAny=function(i,r){return s(this,void 0,void 0,function(){return a(this,function(t){return[2,new Promise(function(t,e){var n=new XMLHttpRequest;n.open("GET",i,!0),n.responseType=r,n.onreadystatechange=function(){4===n.readyState&&(200<=n.status&&n.status<300?t(n.response):e(n.statusText))},n.send()})]})})},n.fetchContentAsText=function(e){return s(this,void 0,void 0,function(){return a(this,function(t){return[2,n.fetchContentAsAny(e,"text")]})})},n.fetchContentAsArrayBuffer=function(e){return s(this,void 0,void 0,function(){return a(this,function(t){return[2,n.fetchContentAsAny(e,"arraybuffer")]})})},n.isAbsoluteUrl=function(t){return t.startsWith("http://")||t.startsWith("https://")},n}();n.default=i},{}],6:[function(t,e,n){"use strict";var i=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},r=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},c=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},s=function(){function t(){i(this,t),this.listeners={}}return t.prototype.on=function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)},t.prototype.off=function(t,e){if(!this.listeners[t])return!1;var n=this.listeners[t].indexOf(e);return this.listeners[t].splice(n,1),-1<n},t.prototype.trigger=function(t){var e=this.listeners[t],n=void 0,i=void 0,r=void 0;if(e)if(2===arguments.length)for(i=e.length,n=0;n<i;++n)e[n].call(this,arguments[1]);else for(r=Array.prototype.slice.call(arguments,1),i=e.length,n=0;n<i;++n)e[n].apply(this,r)},t.prototype.dispose=function(){this.listeners={}},t.prototype.pipe=function(e){this.on("data",function(t){e.push(t)})},t}(),h=function(e){function n(){i(this,n);var t=c(this,e.call(this));return t.buffer="",t}return r(n,e),n.prototype.push=function(t){var e=void 0;for(this.buffer+=t,e=this.buffer.indexOf("\n");-1<e;e=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,e)),this.buffer=this.buffer.substring(e+1)},n}(s),l=function(t){for(var e=t.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),n={},i=e.length,r=void 0;i--;)""!==e[i]&&((r=/([^=]*)=(.*)/.exec(e[i]).slice(1))[0]=r[0].replace(/^\s+|\s+$/g,""),r[1]=r[1].replace(/^\s+|\s+$/g,""),r[1]=r[1].replace(/^['"](.*)['"]$/g,"$1"),n[r[0]]=r[1]);return n},d=function(t){function e(){return i(this,e),c(this,t.call(this))}return r(e,t),e.prototype.push=function(t){var e=void 0,n=void 0;if(0!==(t=t.replace(/^[\u0000\s]+|[\u0000\s]+$/g,"")).length)if("#"===t[0])if(0===t.indexOf("#EXT"))if(t=t.replace("\r",""),e=/^#EXTM3U/.exec(t))this.trigger("data",{type:"tag",tagType:"m3u"});else{if(e=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(t))return n={type:"tag",tagType:"inf"},e[1]&&(n.duration=parseFloat(e[1])),e[2]&&(n.title=e[2]),void this.trigger("data",n);if(e=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(t))return n={type:"tag",tagType:"targetduration"},e[1]&&(n.duration=parseInt(e[1],10)),void this.trigger("data",n);if(e=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(t))return n={type:"tag",tagType:"totalduration"},e[1]&&(n.duration=parseInt(e[1],10)),void this.trigger("data",n);if(e=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(t))return n={type:"tag",tagType:"version"},e[1]&&(n.version=parseInt(e[1],10)),void this.trigger("data",n);if(e=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return n={type:"tag",tagType:"media-sequence"},e[1]&&(n.number=parseInt(e[1],10)),void this.trigger("data",n);if(e=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return n={type:"tag",tagType:"discontinuity-sequence"},e[1]&&(n.number=parseInt(e[1],10)),void this.trigger("data",n);if(e=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(t))return n={type:"tag",tagType:"playlist-type"},e[1]&&(n.playlistType=e[1]),void this.trigger("data",n);if(e=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(t))return n={type:"tag",tagType:"byterange"},e[1]&&(n.length=parseInt(e[1],10)),e[2]&&(n.offset=parseInt(e[2],10)),void this.trigger("data",n);if(e=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(t))return n={type:"tag",tagType:"allow-cache"},e[1]&&(n.allowed=!/NO/.test(e[1])),void this.trigger("data",n);if(e=/^#EXT-X-MAP:?(.*)$/.exec(t)){if(n={type:"tag",tagType:"map"},e[1]){var i=l(e[1]);if(i.URI&&(n.uri=i.URI),i.BYTERANGE){var r=i.BYTERANGE.split("@"),s=r[0],a=r[1];n.byterange={},s&&(n.byterange.length=parseInt(s,10)),a&&(n.byterange.offset=parseInt(a,10))}}this.trigger("data",n)}else if(e=/^#EXT-X-STREAM-INF:?(.*)$/.exec(t)){if(n={type:"tag",tagType:"stream-inf"},e[1]){if(n.attributes=l(e[1]),n.attributes.RESOLUTION){var o=n.attributes.RESOLUTION.split("x"),u={};o[0]&&(u.width=parseInt(o[0],10)),o[1]&&(u.height=parseInt(o[1],10)),n.attributes.RESOLUTION=u}n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes["PROGRAM-ID"]&&(n.attributes["PROGRAM-ID"]=parseInt(n.attributes["PROGRAM-ID"],10))}this.trigger("data",n)}else{if(e=/^#EXT-X-MEDIA:?(.*)$/.exec(t))return n={type:"tag",tagType:"media"},e[1]&&(n.attributes=l(e[1])),void this.trigger("data",n);if(e=/^#EXT-X-ENDLIST/.exec(t))this.trigger("data",{type:"tag",tagType:"endlist"});else if(e=/^#EXT-X-DISCONTINUITY/.exec(t))this.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(e=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(t))return n={type:"tag",tagType:"program-date-time"},e[1]&&(n.dateTimeString=e[1],n.dateTimeObject=new Date(e[1])),void this.trigger("data",n);if(e=/^#EXT-X-KEY:?(.*)$/.exec(t))return n={type:"tag",tagType:"key"},e[1]&&(n.attributes=l(e[1]),n.attributes.IV&&("0x"===n.attributes.IV.substring(0,2).toLowerCase()&&(n.attributes.IV=n.attributes.IV.substring(2)),n.attributes.IV=n.attributes.IV.match(/.{8}/g),n.attributes.IV[0]=parseInt(n.attributes.IV[0],16),n.attributes.IV[1]=parseInt(n.attributes.IV[1],16),n.attributes.IV[2]=parseInt(n.attributes.IV[2],16),n.attributes.IV[3]=parseInt(n.attributes.IV[3],16),n.attributes.IV=new Uint32Array(n.attributes.IV))),void this.trigger("data",n);if(e=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(t))return n={type:"tag",tagType:"cue-out-cont"},e[1]?n.data=e[1]:n.data="",void this.trigger("data",n);if(e=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(t))return n={type:"tag",tagType:"cue-out"},e[1]?n.data=e[1]:n.data="",void this.trigger("data",n);if(e=/^#EXT-X-CUE-IN:?(.*)?$/.exec(t))return n={type:"tag",tagType:"cue-in"},e[1]?n.data=e[1]:n.data="",void this.trigger("data",n);this.trigger("data",{type:"tag",data:t.slice(4)})}}}else this.trigger("data",{type:"comment",text:t.slice(1)});else this.trigger("data",{type:"uri",uri:t})},e}(s),a=function(e){function n(){i(this,n);var t=c(this,e.call(this));t.lineStream=new h,t.parseStream=new d,t.lineStream.pipe(t.parseStream);var r=t,s=[],a={},o=void 0,u=void 0,l={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},g=0;return t.manifest={allowCache:!0,discontinuityStarts:[],segments:[]},t.parseStream.on("data",function(e){var n=void 0,i=void 0;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=e.allowed,"allowed"in e||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var t={};"length"in e&&((a.byterange=t).length=e.length,"offset"in e||(this.trigger("info",{message:"defaulting offset to zero"}),e.offset=0)),"offset"in e&&((a.byterange=t).offset=e.offset)},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),0<e.duration&&(a.duration=e.duration),0===e.duration&&(a.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=s},key:function(){e.attributes?"NONE"!==e.attributes.METHOD?e.attributes.URI?(e.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),u={method:e.attributes.METHOD||"AES-128",uri:e.attributes.URI},void 0!==e.attributes.IV&&(u.iv=e.attributes.IV)):this.trigger("warn",{message:"ignoring key declaration without URI"}):u=null:this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(e.number)?this.manifest.mediaSequence=e.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+e.number})},"discontinuity-sequence":function(){isFinite(e.number)?(this.manifest.discontinuitySequence=e.number,g=e.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+e.number})},"playlist-type":function(){/VOD|EVENT/.test(e.playlistType)?this.manifest.playlistType=e.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+e.playlist})},map:function(){o={},e.uri&&(o.uri=e.uri),e.byterange&&(o.byterange=e.byterange)},"stream-inf":function(){this.manifest.playlists=s,this.manifest.mediaGroups=this.manifest.mediaGroups||l,e.attributes?(a.attributes||(a.attributes={}),f(a.attributes,e.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||l,e.attributes&&e.attributes.TYPE&&e.attributes["GROUP-ID"]&&e.attributes.NAME){var t=this.manifest.mediaGroups[e.attributes.TYPE];t[e.attributes["GROUP-ID"]]=t[e.attributes["GROUP-ID"]]||{},n=t[e.attributes["GROUP-ID"]],(i={default:/yes/i.test(e.attributes.DEFAULT)}).default?i.autoselect=!0:i.autoselect=/yes/i.test(e.attributes.AUTOSELECT),e.attributes.LANGUAGE&&(i.language=e.attributes.LANGUAGE),e.attributes.URI&&(i.uri=e.attributes.URI),e.attributes["INSTREAM-ID"]&&(i.instreamId=e.attributes["INSTREAM-ID"]),e.attributes.CHARACTERISTICS&&(i.characteristics=e.attributes.CHARACTERISTICS),e.attributes.FORCED&&(i.forced=/yes/i.test(e.attributes.FORCED)),n[e.attributes.NAME]=i}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){g+=1,a.discontinuity=!0,this.manifest.discontinuityStarts.push(s.length)},"program-date-time":function(){this.manifest.dateTimeString=e.dateTimeString,this.manifest.dateTimeObject=e.dateTimeObject},targetduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+e.duration}):this.manifest.targetDuration=e.duration},totalduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid total duration: "+e.duration}):this.manifest.totalDuration=e.duration},"cue-out":function(){a.cueOut=e.data},"cue-out-cont":function(){a.cueOutCont=e.data},"cue-in":function(){a.cueIn=e.data}}[e.tagType]||function(){}).call(r)},uri:function(){a.uri=e.uri,s.push(a),!this.manifest.targetDuration||"duration"in a||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),a.duration=this.manifest.targetDuration),u&&(a.key=u),a.timeline=g,o&&(a.map=o),a={}},comment:function(){}})[e.type].call(r)}),t}return r(n,e),n.prototype.push=function(t){this.lineStream.push(t)},n.prototype.end=function(){this.lineStream.push("\n")},n}(s);n.LineStream=h,n.ParseStream=d,n.Parser=a},{}],"p2p-media-loader-hlsjs":[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t("p2p-media-loader-core"),r=t("./segment-manager"),s=t("./hlsjs-loader"),a=t("./hlsjs-loader-class");function o(t,i){t.on("hlsFragChanged",function(t,e){var n=e&&e.frag?e.frag.url:void 0;i.setPlayingSegment(n)}),t.on("hlsDestroying",function(){i.destroy()})}function u(t){t&&t.config&&t.config.loader&&"function"==typeof t.config.loader.getSegmentManager&&o(t,t.config.loader.getSegmentManager())}n.createLoaderClass=function(t){void 0===t&&(t={});var e=t.segmentManager||new r.default(new i.HybridLoader(t.loaderSettings));return a.createHlsJsLoaderClass(s.default,e)},n.initHlsJsPlayer=u,n.initClapprPlayer=function(e){e.on("play",function(){var t=e.core.getCurrentPlayback();t._hls&&!t._hls._p2pm_linitialized&&(t._hls._p2pm_linitialized=!0,u(e.core.getCurrentPlayback()._hls))})},n.initFlowplayerHlsJsPlayer=function(t){t.on("ready",function(){return u(t.engine.hlsjs)})},n.initVideoJsContribHlsJsPlayer=function(e){e.ready(function(){var t=e.tech_.options_;t&&t.hlsjsConfig&&t.hlsjsConfig.loader&&"function"==typeof t.hlsjsConfig.loader.getSegmentManager&&o(e.tech_,t.hlsjsConfig.loader.getSegmentManager())})},n.initMediaElementJsPlayer=function(i){i.addEventListener("hlsFragChanged",function(t){var e=t.data&&1<t.data.length&&t.data[1].frag?t.data[1].frag.url:void 0,n=i.hlsPlayer;n&&n.config&&n.config.loader&&"function"==typeof n.config.loader.getSegmentManager&&n.config.loader.getSegmentManager().setPlayingSegment(e)}),i.addEventListener("hlsDestroying",function(){var t=i.hlsPlayer;t&&t.config&&t.config.loader&&"function"==typeof t.config.loader.getSegmentManager&&t.config.loader.getSegmentManager().destroy()})};var l=t("./segment-manager");n.SegmentManager=l.default},{"./hlsjs-loader":3,"./hlsjs-loader-class":2,"./segment-manager":4,"p2p-media-loader-core":void 0}]},{},[1]);
